<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gu√≠a de Colegios en Ferrol | Encuentra el mejor centro para tus hijos</title>
    <meta name="description" content="La gu√≠a m√°s completa de colegios en Ferrol. Filtra por tipo, servicios, cursos y encuentra toda la informaci√≥n que necesitas para decidir.">
    <link rel="stylesheet" href="estilos-bitkids.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        
    </style>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-T46Y37LT38"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-T46Y37LT38');
</script>
</head>


<div id="cookie-consent-banner" class="cookie-consent-banner">
    <div class="container d-md-flex align-items-center justify-content-between">
        <p class="mb-0 me-3">
            Utilizamos cookies propias y de terceros para mejorar tu experiencia y nuestros servicios. Al hacer clic en "Aceptar todo", aceptas su uso. Puedes obtener m√°s informaci√≥n en nuestra 
            <a href="politica-de-cookies.html">Pol√≠tica de Cookies</a>.
        </p>
        <div class="cookie-buttons mt-3 mt-md-0">
            <button id="btn-cookie-accept" class="btn btn-primary">Aceptar todo</button>
            <button id="btn-cookie-reject" class="btn btn-secondary">Rechazar</button>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const COOKIE_NAME = 'user_cookie_consent';
        const COOKIE_EXPIRATION_DAYS = 365;

        const banner = document.getElementById('cookie-consent-banner');
        const acceptBtn = document.getElementById('btn-cookie-accept');
        const rejectBtn = document.getElementById('btn-cookie-reject');

        // Funci√≥n para establecer una cookie
        const setCookie = (name, value, days) => {
            let expires = "";
            if (days) {
                const date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                expires = "; expires=" + date.toUTCString();
            }
            document.cookie = name + "=" + (value || "") + expires + "; path=/; SameSite=Lax";
        };

        // Funci√≥n para obtener una cookie
        const getCookie = (name) => {
            const nameEQ = name + "=";
            const ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        };
        
        // Ocultar el banner
        const hideBanner = () => {
            banner.classList.remove('active');
        };

        // Mostrar el banner
        const showBanner = () => {
            banner.classList.add('active');
        };
        
        // Event Listeners para los botones
        acceptBtn.addEventListener('click', () => {
            // Aqu√≠ podr√≠as inicializar tus scripts de analytics si los tuvieras
            console.log('Consentimiento de cookies aceptado.');
            setCookie(COOKIE_NAME, 'accepted', COOKIE_EXPIRATION_DAYS);
            hideBanner();
        });
        
        rejectBtn.addEventListener('click', () => {
            console.log('Consentimiento de cookies rechazado.');
            setCookie(COOKIE_NAME, 'rejected', COOKIE_EXPIRATION_DAYS);
            hideBanner();
        });

        // Comprobar si la cookie de consentimiento ya existe
        if (!getCookie(COOKIE_NAME)) {
            // Peque√±a demora para que no aparezca de golpe
            setTimeout(showBanner, 500);
        }
    });
</script>
<header class="app-header bg-white shadow-sm">
    <div class="container">
        <nav class="navbar navbar-expand">
            <a class="navbar-brand" href="index.html">
                <span class="fw-bold text-primary">Gu√≠a</span>
                <span class="fw-normal">Colegios Ferrol</span>
            </a>
            
            <div class="ms-auto">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Colegios</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="blog.html">Blog</a>
                    </li>
                </ul>
            </div>
            </nav>
    </div>
</header>
<body>

    <header class="container text-center my-5">
        <h1 class="display-4">Gu√≠a de Colegios en Ferrol</h1>
        <p class="lead">Encuentra y compara los mejores centros educativos para tus hijos de forma f√°cil y r√°pida.</p>
    </header>
    <div class="container">
        <div class="bg-white p-4 p-md-5 rounded shadow-sm mb-5">
            <h2 class="mb-3">Encuentra el Colegio Ideal para tus Hijos en Ferrol</h2>
            <p class="lead">Sabemos que elegir el centro educativo adecuado es una de las decisiones m√°s importantes para tu familia. Por eso, hemos creado la gu√≠a m√°s completa y f√°cil de usar de <strong>colegios en Ferrol</strong>. Nuestro objetivo es darte toda la informaci√≥n que necesitas, de forma clara y centralizada, para que puedas tomar la mejor decisi√≥n sin perder tiempo.</p>
            <p>Desde colegios p√∫blicos y concertados hasta privados, aqu√≠ encontrar√°s fichas detalladas con todo lo que te interesa: el proyecto educativo, las instalaciones, los servicios como comedor o transporte, los idiomas impartidos y las actividades extraescolares. </p>

            <h3 class="mt-4">¬øC√≥mo funciona esta gu√≠a?</h3>
            <p>Utiliza nuestros filtros para acotar tu b√∫squeda seg√∫n tus prioridades. Puedes buscar por:</p>
            <ul>
                <li><strong>Tipo de centro:</strong> Filtra entre colegios p√∫blicos, concertados o privados.</li>
                <li><strong>Niveles educativos:</strong> Encuentra f√°cilmente centros que ofrezcan desde educaci√≥n infantil y primaria hasta ESO y bachillerato.</li>
                <li><strong>Servicios clave:</strong> Marca si necesitas que el colegio disponga de transporte escolar, comedor, horario ampliado, etc.</li>
            </ul>
            <p>Una vez que encuentres un colegio que te interese, haz clic en "Ver ficha completa" para acceder a toda la informaci√≥n detallada. ¬°As√≠ de f√°cil es empezar a construir el futuro educativo de tus hijos en Ferrol y comarca!</p>
        </div>
    </div>
    <main class="container">
        <div class="card p-4 mb-5 shadow-sm">
            <h5 class="card-title mb-3">Filtra tu b√∫squeda</h5>
            <div class="row g-3">
                <div class="col-md-3">
                    <select id="filtro-tipo" class="form-select">
                        <option value="">Todos los tipos</option>
                        <option value="P√∫blico">P√∫blico</option>
                        <option value="Concertado">Concertado</option>
                        <option value="Privado">Privado</option>
                    </select>
                </div>
                <div class="col-md-9 d-flex align-items-center flex-wrap">
                    <div class="form-check form-switch me-3">
                        <input class="form-check-input" type="checkbox" id="filtro-transporte">
                        <label class="form-check-label" for="filtro-transporte">üöå Con transporte</label>
                    </div>
                    <div class="form-check form-switch me-3">
                        <input class="form-check-input" type="checkbox" id="filtro-comedor">
                        <label class="form-check-label" for="filtro-comedor">üçΩÔ∏è Con comedor</label>
                    </div>
                    <div class="form-check form-switch me-3">
                        <input class="form-check-input" type="checkbox" id="filtro-eso">
                        <label class="form-check-label" for="filtro-eso">üéì Con ESO</label>
                    </div>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="filtro-bachillerato">
                        <label class="form-check-label" for="filtro-bachillerato">üìö Con Bachillerato</label>
                    </div>
                </div>
            </div>
        </div>

        <div id="listado-colegios" class="row g-4">
            </div>
        <p id="sin-resultados" class="text-center lead mt-5" style="display: none;">No se han encontrado colegios que coincidan con tu b√∫squeda.</p>
        <div class="container mt-5 pt-4 border-top">
            <h2 class="text-center display-6 mb-4">√öltimas Noticias del Blog</h2>
            <div id="ultimas-noticias" class="row g-4">
                </div>
            <div class="text-center mt-4">
                <a href="blog.html" class="btn btn-primary btn-lg">Ver todas las noticias</a>
            </div>
        </div>
    </main>

    <footer class="text-center text-muted py-4 mt-5">
            <p class="small">
            <a href="aviso-legal.html" class="text-muted">Aviso Legal</a> | 
            <a href="politica-de-privacidad.html" class="text-muted">Pol√≠tica de Privacidad</a> | 
            <a href="politica-de-cookies.html" class="text-muted">Pol√≠tica de Cookies</a>
        </p>
        <p>&copy; 2025 Gu√≠a de Colegios de Ferrol</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const listadoContainer = document.getElementById('listado-colegios');
            const sinResultados = document.getElementById('sin-resultados');
            let colegios = [];

            // --- 1. Cargar datos del JSON ---
            fetch('colegios.json?v=' + new Date().getTime())
                .then(response => response.json())
                .then(data => {
                    colegios = data;
                    renderColegios(colegios);
                })
                .catch(error => {
                    console.error('Error al cargar los colegios:', error);
                    listadoContainer.innerHTML = '<p class="text-danger">No se pudieron cargar los datos de los colegios.</p>';
                });

            // --- 2. Funci√≥n para renderizar los colegios (VERSI√ìN ACTUALIZADA) ---
            function renderColegios(colegiosAMostrar) {
                listadoContainer.innerHTML = '';
                if (colegiosAMostrar.length === 0) {
                    sinResultados.style.display = 'block';
                } else {
                    sinResultados.style.display = 'none';
                }

                colegiosAMostrar.forEach(colegio => {
                    const card = `
                        <div class="col-md-6 col-lg-4">
                            <div class="card h-100 shadow-sm card-colegio">
                                <img src="${colegio.imagen_principal}" class="card-img-top" alt="Fachada de ${colegio.nombre}">
                                <div class="card-body d-flex flex-column">
                                    <h5 class="card-title">${colegio.nombre}</h5>
                                    <h6 class="card-subtitle mb-2 text-muted">${colegio.zona}</h6>
                                    <p class="card-text">${colegio.descripcion_corta}</p>
                                    <div>
                                        <span class="badge bg-primary">${colegio.tipo}</span>
                                        ${colegio.servicios.transporte_escolar ? '<span class="badge bg-success">üöå Transporte</span>' : ''}
                                        ${colegio.servicios.comedor ? '<span class="badge bg-info">üçΩÔ∏è Comedor</span>' : ''}
                                    </div>
                                    <div class="mt-auto pt-3">
                                        <a href="${colegio.slug}" class="btn btn-primary w-100">Ver ficha completa</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    listadoContainer.innerHTML += card;
                });
            }

            // --- 3. L√≥gica de filtros ---
            const filtros = document.querySelectorAll('#filtro-tipo, .form-check-input');
            filtros.forEach(filtro => {
                filtro.addEventListener('change', aplicarFiltros);
            });

            function aplicarFiltros() {
                const tipo = document.getElementById('filtro-tipo').value;
                const transporte = document.getElementById('filtro-transporte').checked;
                const comedor = document.getElementById('filtro-comedor').checked;
                const eso = document.getElementById('filtro-eso').checked;
                const bachillerato = document.getElementById('filtro-bachillerato').checked;

                const colegiosFiltrados = colegios.filter(colegio => {
                    return (tipo === '' || colegio.tipo === tipo) &&
                           (!transporte || colegio.servicios.transporte_escolar) &&
                           (!comedor || colegio.servicios.comedor) &&
                           (!eso || colegio.cursos_impartidos.eso) &&
                           (!bachillerato || colegio.cursos_impartidos.bachillerato);
                });

                renderColegios(colegiosFiltrados);
            }
        });
        // --- INICIO DEL NUEVO C√ìDIGO ---
            
            // 1. Llamamos a la nueva funci√≥n al cargar la p√°gina
            cargarUltimasNoticias();

            // 2. Nueva funci√≥n para cargar las 3 √∫ltimas noticias
            function cargarUltimasNoticias() {
                const noticiasContainer = document.getElementById('ultimas-noticias');
                if (!noticiasContainer) return; // Salir si no estamos en la p√°gina correcta

                fetch('noticias.json?v=' + new Date().getTime())
                    .then(response => response.json())
                    .then(data => {
                        // Ordenar por fecha (m√°s nueva a m√°s vieja)
                        const noticiasOrdenadas = data.sort((a, b) => new Date(b.fecha_publicacion) - new Date(a.fecha_publicacion));
                        
                        // Coger solo las 3 primeras
                        const ultimasNoticias = noticiasOrdenadas.slice(0, 3);
                        
                        // Pintar las tarjetas
                        ultimasNoticias.forEach(noticia => {
                            const card = `
                                <div class="col-md-4">
                                    <div class="card h-100 shadow-sm card-colegio">
                                        <img src="${noticia.imagen_destacada_url}" class="card-img-top" alt="${noticia.titulo}">
                                        <div class="card-body d-flex flex-column">
                                            <h5 class="card-title">${noticia.titulo}</h5>
                                            <p class="card-text">${noticia.descripcion_corta}</p>
                                            <div class="mt-auto pt-3">
                                                <a href="${noticia.slug_seo}" class="btn btn-primary w-100">Leer m√°s</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            `;
                            noticiasContainer.innerHTML += card;
                        });
                    })
                    .catch(error => {
                        console.error('Error al cargar las √∫ltimas noticias:', error);
                        noticiasContainer.innerHTML = '<p class="text-warning">No se pudieron cargar las noticias.</p>';
                    });
            }
            
            // --- FIN DEL NUEVO C√ìDIGO ---
    </script>

</body>
</html>